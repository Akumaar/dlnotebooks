{"paragraphs":[{"text":"%md\nThis notebook uses the XGBoost built-in algorithm in Amazon SageMaker to classify the MNIST data set.","user":"anonymous","dateUpdated":"2018-05-07T11:52:34+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true},"editorMode":"ace/mode/markdown"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1525692837390_-1701820501","id":"20180507-113357_165649726","dateCreated":"2018-05-07T11:33:57+0000","dateStarted":"2018-05-07T11:52:34+0000","dateFinished":"2018-05-07T11:52:34+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:11317","results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>This notebook uses the XGBoost built-in algorithm in Amazon SageMaker to classify the MNIST data set.</p>\n"}]}},{"title":"Import Spark classes","text":"%pyspark\nfrom sagemaker_pyspark import IAMRole\nfrom sagemaker_pyspark.algorithms import XGBoostSageMakerEstimator","user":"anonymous","dateUpdated":"2018-05-07T11:52:34+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"text","editOnDblClick":false},"editorMode":"ace/mode/text","title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1525692790559_2031520670","id":"20180507-113310_1876672321","dateCreated":"2018-05-07T11:33:10+0000","dateStarted":"2018-05-07T11:52:34+0000","dateFinished":"2018-05-07T11:52:34+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:11318","results":{"code":"SUCCESS","msg":[]}},{"text":"%pyspark\nregion = \"us-east-1\"\nroleArn = \"arn:aws:iam::ACCOUNT_NUMBER:role/ROLE_NAME\"","user":"anonymous","dateUpdated":"2018-05-07T11:52:34+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"python","editOnDblClick":false},"editorMode":"ace/mode/python"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1525692862598_-1136208970","id":"20180507-113422_588314065","dateCreated":"2018-05-07T11:34:22+0000","dateStarted":"2018-05-07T11:52:34+0000","dateFinished":"2018-05-07T11:52:34+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:11319","results":{"code":"SUCCESS","msg":[]}},{"title":"Load MNIST data set","text":"%pyspark\ntraining_data=spark.read.format(\"libsvm\").option(\"numFeatures\",\"784\").load(\"s3a://sagemaker-sample-data-{}/spark/mnist/train/\".format(region))\ntest_data = spark.read.format(\"libsvm\").option(\"numFeatures\",\"784\").load(\"s3a://sagemaker-sample-data-{}/spark/mnist/train/\".format(region))","user":"anonymous","dateUpdated":"2018-05-07T11:52:34+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"python","editOnDblClick":false},"editorMode":"ace/mode/python","title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1525692891099_-1726767883","id":"20180507-113451_1272504348","dateCreated":"2018-05-07T11:34:51+0000","dateStarted":"2018-05-07T11:52:34+0000","dateFinished":"2018-05-07T11:52:34+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:11320","results":{"code":"SUCCESS","msg":[]}},{"title":"Configure training job","text":"%pyspark\nxgboost_estimator = XGBoostSageMakerEstimator(\n    trainingInstanceType=\"ml.m4.xlarge\", trainingInstanceCount=1, \n    endpointInstanceType=\"ml.m4.xlarge\", endpointInitialInstanceCount=1, \n    sagemakerRole=IAMRole(roleArn))\n\nxgboost_estimator.setObjective('multi:softmax')\nxgboost_estimator.setNumRound(25)\nxgboost_estimator.setNumClasses(10)","user":"anonymous","dateUpdated":"2018-05-07T11:52:57+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"python","editOnDblClick":false},"editorMode":"ace/mode/python","title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1525692903849_-741963941","id":"20180507-113503_936159810","dateCreated":"2018-05-07T11:35:03+0000","dateStarted":"2018-05-07T11:52:50+0000","dateFinished":"2018-05-07T11:52:50+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:11321","results":{"code":"SUCCESS","msg":[]}},{"title":"Train","text":"%pyspark\nxgboost_model = xgboost_estimator.fit(training_data)","user":"anonymous","dateUpdated":"2018-05-07T11:52:51+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"python","editOnDblClick":false},"editorMode":"ace/mode/python","title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1525692939225_120304317","id":"20180507-113539_146915227","dateCreated":"2018-05-07T11:35:39+0000","dateStarted":"2018-05-07T11:52:51+0000","dateFinished":"2018-05-07T12:06:32+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:11322","results":{"code":"SUCCESS","msg":[]}},{"title":"Predict test data set","text":"%pyspark\ntransformed_data = xgboost_model.transform(test_data)\ntransformed_data.show()","user":"anonymous","dateUpdated":"2018-05-07T12:07:07+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"python","editOnDblClick":false},"editorMode":"ace/mode/python","title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1525692774962_821454731","id":"20180507-113254_1223114731","dateCreated":"2018-05-07T11:32:54+0000","dateStarted":"2018-05-07T12:07:07+0000","dateFinished":"2018-05-07T12:07:08+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:11323","results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"+-----+--------------------+----------+\n|label|            features|prediction|\n+-----+--------------------+----------+\n|  5.0|(784,[152,153,154...|       5.0|\n|  0.0|(784,[127,128,129...|       0.0|\n|  4.0|(784,[160,161,162...|       4.0|\n|  1.0|(784,[158,159,160...|       1.0|\n|  9.0|(784,[208,209,210...|       9.0|\n|  2.0|(784,[155,156,157...|       2.0|\n|  1.0|(784,[124,125,126...|       1.0|\n|  3.0|(784,[151,152,153...|       3.0|\n|  1.0|(784,[152,153,154...|       1.0|\n|  4.0|(784,[134,135,161...|       4.0|\n|  3.0|(784,[123,124,125...|       3.0|\n|  5.0|(784,[216,217,218...|       5.0|\n|  3.0|(784,[143,144,145...|       3.0|\n|  6.0|(784,[72,73,74,99...|       6.0|\n|  1.0|(784,[151,152,153...|       1.0|\n|  7.0|(784,[211,212,213...|       7.0|\n|  2.0|(784,[151,152,153...|       2.0|\n|  8.0|(784,[159,160,161...|       8.0|\n|  6.0|(784,[100,101,102...|       6.0|\n|  9.0|(784,[209,210,211...|       9.0|\n+-----+--------------------+----------+\nonly showing top 20 rows\n\n"}]}},{"user":"anonymous","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":false},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1525693015390_-758908216","id":"20180507-113655_267182872","dateCreated":"2018-05-07T11:36:55+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:11324"}],"name":"Classifying MNIST with the built-in XGBoost algorithm in Amazon SageMaker (Python)","id":"2DEWCWB3M","angularObjects":{"2BRWU4WXC:shared_process":[],"2AM1YV5CU:shared_process":[],"2AJXGMUUJ:shared_process":[],"2ANGGHHMQ:shared_process":[],"2AKK3QQXU:shared_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}
